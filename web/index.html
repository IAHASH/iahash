<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>IA-HASH · Verificación de salidas IA</title>
    <meta
      name="description"
      content="IA-HASH genera y verifica huellas criptográficas de las respuestas de tu IA de confianza."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="top-bar">
      <div class="top-bar-inner">
        <div class="brand">
          <span class="brand-logo">#</span>
          <div class="brand-text">
            <div class="brand-title">IA-HASH</div>
            <div class="brand-subtitle">
              Salidas IA verificables y difíciles de manipular.
            </div>
          </div>
        </div>
        <nav class="top-nav">
          <a href="#" class="nav-link nav-link-active">Verificador</a>
          <a href="https://github.com/IAHASH/iahash" target="_blank" rel="noreferrer" class="nav-link">GitHub</a>
          <a href="#how-it-works" class="nav-link">Cómo funciona</a>
        </nav>
      </div>
    </header>

    <main class="page">
      <section class="layout">
        <!-- Columna izquierda: entrada -->
        <section class="card card-main">
          <h1 class="card-title">Generar un nuevo IA-HASH</h1>
          <p class="card-description">
            Pega el <strong>prompt maestro</strong> y la <strong>respuesta</strong> de tu IA.
            IA-HASH genera una huella criptográfica y una firma que luego puede verificarse.
          </p>

          <form id="issue-form" class="form">
            <div class="field-group">
              <label for="prompt_maestro" class="field-label">
                Prompt maestro
                <span class="field-optional">(texto exacto enviado al LLM)</span>
              </label>
              <textarea
                id="prompt_maestro"
                name="prompt_maestro"
                class="field-input field-textarea"
                rows="6"
                required
              ></textarea>
            </div>

            <div class="field-group">
              <label for="respuesta" class="field-label">
                Respuesta del LLM
                <span class="field-optional">(texto completo devuelto por tu IA)</span>
              </label>
              <textarea
                id="respuesta"
                name="respuesta"
                class="field-input field-textarea"
                rows="10"
                required
              ></textarea>
            </div>

            <div class="field-grid">
              <div class="field-group">
                <label for="modelo" class="field-label">Modelo</label>
                <input
                  id="modelo"
                  name="modelo"
                  class="field-input"
                  placeholder="gpt-5.1, llama-3.1-70b, etc."
                  required
                />
              </div>

              <div class="field-group">
                <label for="prompt_id" class="field-label">
                  Prompt ID
                  <span class="field-optional">(opcional)</span>
                </label>
                <input
                  id="prompt_id"
                  name="prompt_id"
                  class="field-input"
                  placeholder="cv-v1, test-psico, etc."
                />
              </div>

              <div class="field-group">
                <label for="subject_id" class="field-label">
                  Subject ID
                  <span class="field-optional">(opcional)</span>
                </label>
                <input
                  id="subject_id"
                  name="subject_id"
                  class="field-input"
                  placeholder="hash interno, usuario, etc."
                />
              </div>
            </div>

            <div class="form-footer">
              <button type="submit" class="btn btn-primary" id="btn-issue">
                Generar IA-HASH
              </button>
              <span class="form-status" id="issue-status"></span>
            </div>
          </form>
        </section>

        <!-- Columna derecha: resultado y verificación -->
        <section class="card card-side">
          <h2 class="card-title">Resultado &amp; verificación</h2>
          <p class="card-description">
            Aquí verás el documento IA-HASH generado y su estado de verificación.
          </p>

          <div class="result-block">
            <div class="result-header">
              <span class="badge" id="verify-badge">Sin verificar</span>
              <span class="result-hint" id="verify-hint">
                Genera un IA-HASH o pega uno para probarlo.
              </span>
            </div>

            <pre id="document-output" class="code-block">
{/* El documento IA-HASH aparecerá aquí en formato JSON bonito */}
            </pre>
          </div>

          <div class="field-group">
            <label for="verify-input" class="field-label">
              Documento IA-HASH a verificar
              <span class="field-optional">
                (pega el JSON o deja vacío para usar el último generado)
              </span>
            </label>
            <textarea
              id="verify-input"
              class="field-input field-textarea"
              rows="8"
            ></textarea>
          </div>

          <div class="form-footer">
            <button type="button" class="btn btn-secondary" id="btn-use-last">
              Usar último generado
            </button>
            <button type="button" class="btn btn-outline" id="btn-verify">
              Verificar IA-HASH
            </button>
            <span class="form-status" id="verify-status"></span>
          </div>
        </section>
      </section>

      <!-- Sección de explicación corta -->
      <section class="card card-info" id="how-it-works">
        <h2 class="card-title">Cómo funciona IA-HASH (versión corta)</h2>
        <ol class="info-list">
          <li>
            <strong>Normalización:</strong> el prompt y la respuesta se limpian
            (saltos de línea, espacios, etc.) para evitar falsas diferencias.
          </li>
          <li>
            <strong>Hash:</strong> se calculan huellas SHA-256 del prompt, de la
            respuesta y de una cadena combinada (&quot;IAHASH-1&quot;, modelo,
            timestamp, etc.).
          </li>
          <li>
            <strong>Firma:</strong> el hash total se firma con una clave
            Ed25519 del <em>issuer</em> (tu instancia de confianza).
          </li>
          <li>
            <strong>Verificación:</strong> cualquiera con el documento y la
            clave pública puede comprobar que el contenido no se ha tocado.
          </li>
        </ol>
        <p class="info-note">
          IA-HASH no valida si lo que dice la IA es verdad. Valida que el
          contenido que se muestra hoy es exactamente el que generó la IA en su
          momento, con ese prompt y ese modelo.
        </p>
      </section>
    </main>

    <footer class="page-footer">
      <span>IA-HASH · v0.1 · </span>
      <span class="mono">iahash.com verified</span>
    </footer>

    <script src="/app.js"></script>
  </body>
</html>

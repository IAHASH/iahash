{% extends "base.html" %}
{% block content %}
  <div class="section">
    <h2>Verify</h2>
    <p class="muted">Tres modos: par de textos, conversación compartida y checker IA-HASH.</p>
  </div>
  <div class="tabs">
    <div class="tab active" onclick="showTab('pair')">Pair</div>
    <div class="tab" onclick="showTab('conversation')">Prompt + URL</div>
    <div class="tab" onclick="showTab('checker')">Checker</div>
  </div>

  <div id="tab-pair" class="card">
    <h3>Pair verification</h3>
    <textarea id="pair-prompt" placeholder="Prompt text" class="input"></textarea>
    <textarea id="pair-response" placeholder="Response text" class="input" style="margin-top: 10px;"></textarea>
    <div class="flex" style="margin-top: 10px;">
      <select id="pair-model" class="input">
        <option value="gpt-4o">gpt-4o</option>
        <option value="claude-3-opus">claude-3-opus</option>
        <option value="unknown" selected>unknown</option>
      </select>
      <button class="button" onclick="submitPair()">Generate</button>
    </div>
    <pre id="pair-log" class="muted"></pre>
  </div>

  <div id="tab-conversation" class="card" style="display:none;">
    <h3>Conversation verification</h3>
    <select id="prompt-slug" class="input">
      <option value="">(opcional) Selecciona prompt maestro</option>
      {% for prompt in prompts %}
        <!-- IMPORTANTE: aquí usamos prompt.id, no el slug -->
        <option value="{{ prompt.id }}">{{ prompt.title }}</option>
      {% endfor %}
    </select>
    <input id="conv-url" class="input" placeholder="https://chatgpt.com/share/." style="margin-top: 10px;">
    <div class="flex" style="margin-top: 10px; gap: 10px;">
      <input id="conv-model" class="input" placeholder="Modelo (opcional)" value="unknown">
      <select id="conv-provider" class="input">
        <option value="chatgpt" selected>chatgpt</option>
        <option value="unknown">unknown</option>
      </select>
    </div>
    <button class="button" style="margin-top: 10px;" onclick="submitConversation()">Verificar conversación</button>
    <pre id="conv-log" class="muted"></pre>
  </div>

  <div id="tab-checker" class="card" style="display:none;">
    <h3>Checker</h3>
    <textarea id="checker-json" class="input" placeholder='Pega documento IA-HASH JSON'></textarea>
    <button class="button" style="margin-top: 10px;" onclick="submitChecker()">Validar</button>
    <pre id="checker-log" class="muted"></pre>
  </div>

  <script src="/static/js/verify.js"></script>
{% endblock %}

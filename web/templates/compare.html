{% extends "base.html" %}
{% block content %}
  <div class="section">
    <p class="pill">Comparador IA-HASH</p>
    <h2>Sube dos artefactos y revisa sus diferencias</h2>
    <p class="muted">
      Analiza h_prompt, h_response, h_total, modelo, timestamp y campos opcionales con
      indicadores verde/amarillo/rojo.
    </p>
  </div>

  <div class="compare-grid">
    <div class="card">
      <div class="section-header">
        <div>
          <div class="badge">Documento A</div>
          <h3>IA-HASH 1</h3>
          <p class="muted">Sube un JSON IA-HASH o pega el contenido.</p>
        </div>
      </div>
      <div class="field-block">
        <span class="field-label">Archivo</span>
        <input type="file" id="file-a" accept="application/json" class="input" />
      </div>
      <label class="field-block">
        <span class="field-label">Contenido JSON</span>
        <textarea id="json-a" class="input" rows="8" placeholder='{"iah_id":"..."}'></textarea>
      </label>
      <p id="status-a" class="muted"></p>
    </div>

    <div class="card">
      <div class="section-header">
        <div>
          <div class="badge">Documento B</div>
          <h3>IA-HASH 2</h3>
          <p class="muted">Sube un JSON IA-HASH o pega el contenido.</p>
        </div>
      </div>
      <div class="field-block">
        <span class="field-label">Archivo</span>
        <input type="file" id="file-b" accept="application/json" class="input" />
      </div>
      <label class="field-block">
        <span class="field-label">Contenido JSON</span>
        <textarea id="json-b" class="input" rows="8" placeholder='{"iah_id":"..."}'></textarea>
      </label>
      <p id="status-b" class="muted"></p>
    </div>
  </div>

  <div class="actions" style="margin-top: 14px;">
    <button class="button" id="compare-btn">Comparar</button>
    <button class="button secondary" id="reset-btn">Limpiar</button>
    <span id="compare-error" class="muted"></span>
  </div>

  <div class="result-card" id="compare-result" style="display:none;">
    <div class="result-card__head">
      <div>
        <p class="muted">Resultado</p>
        <h3>Coincidencias y diferencias</h3>
      </div>
      <span class="badge" id="compare-summary">Listo</span>
    </div>
    <div class="diff-table" id="diff-table"></div>
  </div>

  <script src="/static/js/compare.js"></script>
{% endblock %}

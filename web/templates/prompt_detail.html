{% extends "base.html" %}
{% block content %}
  <div class="section">
    <h2>{{ prompt.title }}</h2>
    <p class="muted">{{ prompt.description }}</p>
  </div>

  <div class="card">
    <h3>Prompt Maestro</h3>
    <textarea class="input" id="prompt-text" readonly style="height: 220px;">{{ prompt.body }}</textarea>
    <button class="button" style="margin-top: 10px;" onclick="copyPrompt()">Copiar Prompt</button>
  </div>

  <div class="card">
    <h3>Verificar respuesta (ChatGPT link)</h3>
    <input id="conv-url" class="input" placeholder="https://chatgpt.com/share/..." style="margin-top: 10px;">

    <div class="flex" style="margin-top: 10px; gap: 10px;">
      <input id="conv-model" class="input" placeholder="Modelo (opcional)" value="unknown">
      <select id="conv-provider" class="input">
        <option value="chatgpt" selected>chatgpt</option>
        <option value="unknown">unknown</option>
      </select>
    </div>

    <!-- IMPORTANTE: ahora enviamos prompt.id, NO el slug -->
    <button class="button" style="margin-top: 10px;" onclick="verifyConversation({{ prompt.id }})">
      Verificar con IA-HASH
    </button>

    <pre id="conv-log" class="muted" style="margin-top: 10px;"></pre>
  </div>

  <div class="card">
    <h3>Historial de verificaciones</h3>
    <p class="muted">Próximamente: aquí aparecerán los últimos IA-HASH emitidos para este prompt.</p>
  </div>

  <script src="/static/js/prompt_detail.js"></script>

{% endblock %}
